<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Italy Kids - Live Football Streaming</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <!-- Video.js for streaming -->
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet">
    <!-- HLS.js for adaptive streaming -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
:root {
  /* Enhanced Color System */
  --italy-blue: #0066CC;
  --italy-blue-light: rgba(0, 102, 204, 0.1);
  --italy-blue-dark: #004d99;
  --italy-green: #009966;
  --italy-green-light: rgba(0, 153, 102, 0.1);
  --italy-red: #E32017;
  --italy-red-light: rgba(227, 32, 23, 0.1);
  --dark: #1D3557;
  --dark-light: #2A4A7A;
  --light: #F1FAEE;
  --text: #1D3557;
  --text-light: #6C757D;
  --background: #f5f5f5;
  --white: #ffffff;
  --gray: #666666;
  
  /* Spacing System */
  --space-xxs: 0.25rem;
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-xxl: 3rem;
  
  /* Typography */
  --text-base: 1rem;
  --text-sm: 0.9rem;
  --text-xs: 0.8rem;
  --text-md: 1.1rem;
  --text-lg: 1.5rem;
  --text-xl: 2.5rem;
  
  /* Shadows */
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 8px 15px rgba(0, 0, 0, 0.15);
  
  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 10px;
  --radius-xl: 16px;
  --radius-full: 9999px;
  
  /* Transitions */
  --transition-fast: 0.15s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.5s ease;
}

/* Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, 
               'Roboto', 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.6;
  color: var(--text);
  background-color: var(--background);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Header & Navigation */
header {
  background: linear-gradient(135deg, var(--italy-blue), var(--dark));
  color: var(--white);
  padding: var(--space-md) var(--space-xl);
  box-shadow: var(--shadow-md);
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1200px;
  margin: 0 auto;
}

.logo {
  font-weight: bold;
  font-size: var(--text-lg);
  color: var(--white);
}

.nav-links {
  display: flex;
  gap: var(--space-lg);
}

.nav-links a {
  color: var(--white);
  text-decoration: none;
  font-weight: 500;
  transition: all var(--transition-normal);
  padding: var(--space-xs) 0;
  position: relative;
}

.nav-links a:hover {
  color: var(--italy-green);
}

.nav-links a::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background-color: var(--italy-green);
  transition: width var(--transition-normal);
}

.nav-links a:hover::after {
  width: 100%;
}

/* Main Content */
.main-container {
  max-width: 1200px;
  margin: var(--space-xl) auto;
  padding: 0 var(--space-xl);
  flex: 1;
}

/* Section Tabs */
.section-tabs {
  display: flex;
  border-bottom: 1px solid #ddd;
  margin-bottom: var(--space-lg);
}

.section-tab {
  padding: var(--space-sm) var(--space-lg);
  cursor: pointer;
  font-weight: 600;
  color: var(--text-light);
  border-bottom: 3px solid transparent;
  transition: all var(--transition-normal);
}

.section-tab.active {
  color: var(--italy-blue);
  border-bottom-color: var(--italy-blue);
}

.section-tab:hover:not(.active) {
  color: var(--italy-blue-dark);
}

.section-content {
  display: none;
}

.section-content.active {
  display: block;
}

/* Matches Section */
.matches-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-md);
  margin-bottom: var(--space-xl);
}

.match-card {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  transition: transform var(--transition-normal), box-shadow var(--transition-normal);
}

.match-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
}

.match-card-header {
  background: var(--italy-blue);
  color: white;
  padding: var(--space-sm);
  font-size: var(--text-sm);
  text-align: center;
}

.match-card-content {
  padding: var(--space-md);
}

.match-teams {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-sm);
}

.match-team {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
}

.match-team-logo {
  width: 40px;
  height: 40px;
  object-fit: contain;
  margin-bottom: var(--space-xs);
}

.match-vs {
  font-weight: bold;
  color: var(--italy-red);
  margin: 0 var(--space-md);
}

.match-time {
  text-align: center;
  color: var(--italy-green);
  font-weight: 600;
  margin-top: var(--space-sm);
}

.match-status {
  display: inline-block;
  padding: var(--space-xxs) var(--space-sm);
  background: var(--italy-green-light);
  color: var(--italy-green);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
}

/* Highlights Section */
.highlights-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: var(--space-md);
}

.highlight-card {
  background: var(--white);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow: var(--shadow-md);
}

.highlight-thumbnail {
  position: relative;
  height: 150px;
  background: #222;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.highlight-play {
  position: absolute;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--italy-blue);
}

.highlight-info {
  padding: var(--space-sm);
}

.highlight-title {
  font-weight: 600;
  margin-bottom: var(--space-xxs);
}

.highlight-meta {
  font-size: var(--text-xs);
  color: var(--text-light);
}

/* Leagues Section */
.leagues-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-md);
}

.league-card {
  background: var(--white);
  border-radius: var(--radius-md);
  padding: var(--space-md);
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: var(--shadow-sm);
  transition: transform var(--transition-normal);
}

.league-card:hover {
  transform: translateY(-3px);
}

.league-logo {
  width: 60px;
  height: 60px;
  object-fit: contain;
  margin-bottom: var(--space-sm);
}

.league-name {
  font-weight: 600;
  text-align: center;
}

/* Featured Match Section */
.featured-match {
  margin-bottom: var(--space-xl);
}

.match-header {
  text-align: center;
  margin-bottom: var(--space-lg);
}

.match-header h1 {
  font-size: clamp(1.8rem, 4vw, var(--text-xl));
  color: var(--italy-blue);
  margin-bottom: var(--space-sm);
}

/* Match Information */
.match-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-md);
  padding: var(--space-md);
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  transition: transform var(--transition-normal), box-shadow var(--transition-normal);
}

.match-info:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
}

.teams {
  display: flex;
  align-items: center;
  gap: var(--space-xl);
}

.team {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 120px;
}

.team-logo {
  width: 60px;
  height: 60px;
  object-fit: contain;
  transition: transform var(--transition-normal);
}

.team:hover .team-logo {
  transform: scale(1.1);
}

.vs {
  font-size: var(--text-lg);
  font-weight: bold;
  color: var(--italy-red);
}

.match-details {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.match-time {
  font-weight: bold;
  color: var(--italy-green);
  font-size: var(--text-md);
}

.match-competition {
  font-size: var(--text-sm);
  color: var(--text-light);
}

.match-stats {
  display: flex;
  gap: var(--space-lg);
}

.stat {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.stat-value {
  font-weight: bold;
  font-size: var(--text-md);
}

.stat-label {
  font-size: var(--text-xs);
  color: var(--text-light);
}

/* Stream Container */
.stream-container {
  width: 100%;
  margin: var(--space-md) 0;
  border-radius: var(--radius-md);
  overflow: hidden;
  background: #000;
  position: relative;
}

.video-js {
  width: 100%;
  height: clamp(300px, 50vh, 500px);
}

.stream-placeholder {
  width: 100%;
  height: clamp(300px, 50vh, 500px);
  background: #222;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: var(--white);
  font-size: var(--text-md);
  gap: var(--space-sm);
}

.stream-placeholder i {
  font-size: 2rem;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { opacity: 0.5; }
  50% { opacity: 1; }
  100% { opacity: 0.5; }
}

/* Controls */
.stream-controls {
  display: flex;
  justify-content: center;
  gap: var(--space-md);
  margin: var(--space-md) 0;
  flex-wrap: wrap;
}

.btn {
  background: var(--italy-blue);
  color: var(--white);
  border: none;
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-weight: 600;
  transition: all var(--transition-normal);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.btn:hover {
  background: var(--dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow-sm);
}

.btn-red {
  background: var(--italy-red);
}

.btn-green {
  background: var(--italy-green);
}

.btn-gray {
  background: var(--gray);
}

.broadcaster-options {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
  justify-content: center;
  margin: var(--space-md) 0;
}

.broadcaster-btn {
  background: var(--white);
  border: 1px solid var(--italy-blue-light);
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-normal);
}

.broadcaster-btn:hover {
  background: var(--italy-blue-light);
}

.broadcaster-btn.active {
  background: var(--italy-blue);
  color: var(--white);
  border-color: var(--italy-blue);
}
.match-commentary,.match-stats-container{
  color: #0066CC;
}

/* User Info */
.user-info {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: var(--space-md);
  margin-bottom: var(--space-md);
}

.user-avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--italy-green);
  color: var(--white);
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  transition: transform var(--transition-fast);
}

.user-avatar:hover {
  transform: scale(1.1);
}

/* Footer */
footer {
  background: var(--dark);
  color: var(--white);
  text-align: center;
  padding: var(--space-lg);
  margin-top: var(--space-xl);
}
/* Floating Football Ball */
#chatBall {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #333333, #000000); /* Football colors */
    border-radius: 50%;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.3s ease;
    z-index: 9999;
    animation: float 3s ease-in-out infinite;
    border: 2px solid #ffffff;
}

#chatBall:hover {
    transform: scale(1.1) rotate(20deg);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

#chatBall::before {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, 
        transparent 0%, 
        transparent 45%, 
        white 45%, 
        white 55%, 
        transparent 55%),
        linear-gradient(to right, white 0%, white 100%);
    background-size: 100% 100%;
    background-repeat: no-repeat;
    opacity: 0.15;
}

@keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
}

/* Responsive Breakpoints */
/* Tablet (768px and below) */
@media (max-width: 768px) {
  header {
    padding: var(--space-md);
  }
  
  .nav-links {
    gap: var(--space-md);
    font-size: var(--text-sm);
  }
  
  .main-container {
    padding: 0 var(--space-md);
  }
  
  .match-info {
    flex-direction: column;
    gap: var(--space-md);
  }
  
  .teams {
    gap: var(--space-md);
  }
  
  .stream-controls,
  .broadcaster-options {
    flex-direction: column;
    align-items: center;
  }
  
  .btn,
  .broadcaster-btn {
    width: 100%;
    justify-content: center;
  }
  
  .section-tabs {
    overflow-x: auto;
    white-space: nowrap;
    padding-bottom: var(--space-xs);
  }
  
  .section-tab {
    padding: var(--space-sm) var(--space-md);
  }
  
  .matches-container,
  .highlights-container,
  .leagues-container {
    grid-template-columns: 1fr;
  }
}

/* Mobile (480px and below) */
@media (max-width: 480px) {
  nav {
    flex-direction: column;
    gap: var(--space-sm);
  }
  
  .nav-links {
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .match-stats {
    gap: var(--space-md);
  }
  
  .team-logo {
    width: 50px;
    height: 50px;
  }
  
  .vs {
    font-size: var(--text-md);
  }
  
  .user-info {
    justify-content: center;
  }
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
  :root {
    --text: #F1FAEE;
    --text-light: #A8DADC;
    --background: #1A1A1A;
    --white: #2D2D2D;
  }
  
  body {
    background-color: var(--background);
    color: var(--text);
  }
  
  .match-info,
  .broadcaster-btn,
  .match-card,
  .highlight-card,
  .league-card {
    background-color: var(--white);
  }
  
  .stream-placeholder {
    background: #111;
  }
  
  .section-tabs {
    border-bottom-color: #444;
  }
}

/* Accessibility Improvements */
a:focus,
button:focus {
  outline: 2px solid var(--italy-green);
  outline-offset: 2px;
}

.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--italy-blue);
  color: white;
  padding: var(--space-xs) var(--space-sm);
  z-index: 1000;
  transition: top var(--transition-normal);
}

.skip-link:focus {
  top: 0;
}
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">Italy Kids</div>
            <div class="nav-links">
                <a href="dashboard.html"><i class="fas fa-home"></i> Home</a>
                <a href="about.html"><i class="fas fa-info-circle"></i> About</a>
                <a href="players.html"><i class="fas fa-users"></i> Players</a>
                <a href="gallery.html"><i class="fas fa-images"></i> Gallery</a>
                <a href="schedule.html"><i class="fas fa-calendar-alt"></i> Schedule</a>
                <a href="coaches.html"><i class="fas fa-chalkboard-teacher"></i> Coaches</a>
                <a href="gamezone.html"><i class="fas fa-futbol"></i> Game Zone</a>        
                <a href="contact.html"><i class="fas fa-envelope"></i> Contact</a>
            </div>
        </nav>
    </header>

    <main class="main-container">
        <div class="user-info" id="userInfo">
            <div class="user-avatar" id="userAvatar"></div>
            <span id="userName"></span>
            <button class="btn btn-red" id="logoutBtn"><i class="fas fa-sign-out-alt"></i></button>
        </div>

        <!-- Section Tabs -->
        <div class="section-tabs">
            <div class="section-tab active" data-tab="featured">Featured</div>
            <div class="section-tab" data-tab="matches">Matches</div>
            <div class="section-tab" data-tab="highlights">Highlights</div>
            <div class="section-tab" data-tab="leagues">Leagues</div>
        </div>

        <!-- Featured Section -->
        <div class="section-content active" id="featured-section">
            <div class="featured-match">
                <div class="match-header">
                    <h1><i class="fas fa-futbol"></i> Live Football</h1>
                    <p>Watch top matches live with Italy Kids</p>
                </div>

                <!-- Match Information -->
                <div class="match-info">
                    <div class="teams">
                        <div class="team">
                            <img src="assets/CITY.png" alt="Manchester City" class="team-logo" id="homeTeamLogo">
                            <span id="homeTeamName">Manchester City</span>
                        </div>
                        <div class="vs">VS</div>
                        <div class="team">
                            <img src="assets/FCB.png" alt="Barcelona" class="team-logo" id="awayTeamLogo">
                            <span id="awayTeamName">Barcelona</span>
                        </div>
                    </div>
                    <div class="match-details">
                        <div class="match-time" id="matchTime">LIVE 35'</div>
                        <div class="match-competition" id="matchCompetition">UEFA Champions League</div>
                    </div>
                    <div class="match-stats">
                        <div class="stat">
                            <div class="stat-value" id="viewerCount">0</div>
                            <div class="stat-label">Viewers</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="matchScore">1 - 0</div>
                            <div class="stat-label">Score</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="matchMinute">35'</div>
                            <div class="stat-label">Minute</div>
                        </div>
                    </div>
                </div>

                <!-- Stream Container -->
                <div class="stream-container">
                    <div id="streamPlaceholder" class="stream-placeholder">
                        <div>
                            <p>Select a broadcaster to start watching</p>
                            <p><i class="fas fa-circle-notch fa-spin"></i> Loading available streams...</p>
                        </div>
                    </div>
                    <video id="liveStreamPlayer" class="video-js vjs-default-skin" style="display:none;" controls preload="auto">
                        <p class="vjs-no-js">
                            To view this video please enable JavaScript, and consider upgrading to a
                            web browser that <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
                        </p>
                    </video>
                </div>

                <!-- Broadcaster Selection -->
                <div class="broadcaster-options" id="broadcasterOptions">
                    <!-- Options will be populated by JavaScript -->
                </div>

                <!-- Stream Controls -->
                <div class="stream-controls">
                    <button class="btn" id="shareBtn">
                        <i class="fas fa-share-alt"></i> Share Stream
                    </button>
                    <button class="btn btn-green" id="refreshStreamBtn">
                        <i class="fas fa-sync-alt"></i> Refresh Stream
                    </button>
                    <button class="btn btn-gray" id="qualityBtn" style="display:none;">
                        <i class="fas fa-tachometer-alt"></i> Quality
                    </button>
                </div>

                <!-- Match Commentary -->
                <div class="match-commentary" style="background:white; border-radius:10px; padding:1rem; margin:1rem 0; box-shadow:var(--shadow);">
                    <h3><i class="fas fa-comment-alt"></i> Live Commentary</h3>
                    <div id="liveCommentary" style="max-height:300px; overflow-y:auto; padding:0.5rem;">
                        <p>Loading live commentary...</p>
                    </div>
                </div>

                <!-- Match Statistics -->
                <div class="match-stats-container" style="background:white; border-radius:10px; padding:1rem; margin:1rem 0; box-shadow:var(--shadow);">
                    <h3><i class="fas fa-chart-bar"></i> Match Statistics</h3>
                    <div id="matchStatistics" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:1rem; margin-top:1rem;">
                        <!-- Stats will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Matches Section -->
        <div class="section-content" id="matches-section">
            <h2 class="section-title">Today's Matches</h2>
            <div class="matches-container">
                <!-- Match cards will be populated by JavaScript -->
            </div>
        </div>

        <!-- Highlights Section -->
        <div class="section-content" id="highlights-section">
            <h2 class="section-title">Latest Highlights</h2>
            <div class="highlights-container">
                <!-- Highlight cards will be populated by JavaScript -->
            </div>
        </div>

        <!-- Leagues Section -->
        <div class="section-content" id="leagues-section">
            <h2 class="section-title">Top Leagues</h2>
            <div class="leagues-container">
                <!-- League cards will be populated by JavaScript -->
            </div>
        </div>
    </main>

    <footer>
      <!-- Floating Football -->
    <div id="chatBall" onclick="openChat()">
      <i class="fas fa-futbol"></i> <!-- Football icon -->
    </div>
        <p>© 2025 Italy Kids. All rights reserved.</p>
        <p><small>All streams are provided by official broadcast partners</small></p>
    </footer>

    <!-- Video.js Script -->
    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDayaLwgjL0LAO7pqn2IhZet2OXgw_jly4",
            authDomain: "learning-56336.firebaseapp.com",
            projectId: "learning-56336",
            storageBucket: "learning-56336.appspot.com",
            messagingSenderId: "1097871497996",
            appId: "1:1097871497996:web:ea6ed217bce6685a978729",
            measurementId: "G-MT2NESLNZS",
            databaseURL: "https://learning-56336-default-rtdb.firebaseio.com/"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const database = firebase.database();

        // DOM Elements
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const logoutBtn = document.getElementById('logoutBtn');
        const viewerCount = document.getElementById('viewerCount');
        const shareBtn = document.getElementById('shareBtn');
        const refreshStreamBtn = document.getElementById('refreshStreamBtn');
        const qualityBtn = document.getElementById('qualityBtn');
        const streamPlaceholder = document.getElementById('streamPlaceholder');
        const liveStreamPlayer = document.getElementById('liveStreamPlayer');
        const broadcasterOptions = document.getElementById('broadcasterOptions');
        const liveCommentary = document.getElementById('liveCommentary');
        const matchStatistics = document.getElementById('matchStatistics');
        const homeTeamName = document.getElementById('homeTeamName');
        const awayTeamName = document.getElementById('awayTeamName');
        const homeTeamLogo = document.getElementById('homeTeamLogo');
        const awayTeamLogo = document.getElementById('awayTeamLogo');
        const matchTime = document.getElementById('matchTime');
        const matchCompetition = document.getElementById('matchCompetition');
        const matchScore = document.getElementById('matchScore');
        const matchMinute = document.getElementById('matchMinute');
        const sectionTabs = document.querySelectorAll('.section-tab');
        const sectionContents = document.querySelectorAll('.section-content');
        const matchesContainer = document.querySelector('.matches-container');
        const highlightsContainer = document.querySelector('.highlights-container');
        const leaguesContainer = document.querySelector('.leagues-container');

        // Video Player Instance
        let player;

        // Current Stream Configuration
        let currentStream = null;
        let hlsInstance = null;

        // Tab switching functionality
        sectionTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                sectionTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding content
                sectionContents.forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabId}-section`).classList.add('active');
                
                // Load data if needed
                if (tabId === 'matches' && matchesContainer.innerHTML === '') {
                    loadMatches();
                } else if (tabId === 'highlights' && highlightsContainer.innerHTML === '') {
                    loadHighlights();
                } else if (tabId === 'leagues' && leaguesContainer.innerHTML === '') {
                    loadLeagues();
                }
            });
        });

        // Check auth state
        auth.onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = 'index.html';
            } else {
                // Display user info
                const displayName = user.displayName || user.email.split('@')[0];
                userName.textContent = displayName;
                userAvatar.textContent = displayName.charAt(0).toUpperCase();
                
                // Set random background color for avatar
                const colors = ['#E63946', '#1D3557', '#457B9D', '#A8DADC', '#009966'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                userAvatar.style.backgroundColor = randomColor;
                
                // Initialize real-time features
                initViewerCount();
                loadMatchData();
                initStreaming();
                
                // Load initial data for matches section
                loadMatches();
            }
        });

        // Logout functionality
        logoutBtn.addEventListener('click', async () => {
            try {
                await auth.signOut();
                window.location.href = 'index.html';
            } catch (error) {
                console.error('Logout error:', error);
                alert('There was a problem logging out. Please try again.');
            }
        });

        // Share Button Functionality
        shareBtn.addEventListener('click', () => {
            if (navigator.share) {
                navigator.share({
                    title: 'Watch ' + homeTeamName.textContent + ' vs ' + awayTeamName.textContent,
                    text: 'Watch the live match on Italy Kids!',
                    url: window.location.href
                }).catch(err => {
                    console.log('Error sharing:', err);
                });
            } else {
                alert('Share this link: ' + window.location.href);
            }
        });

        // Refresh Stream Button
        refreshStreamBtn.addEventListener('click', () => {
            if (currentStream) {
                loadStream(currentStream);
            }
        });

        // Initialize real-time viewer count
        function initViewerCount() {
            const viewerRef = database.ref('stream/viewers');
            
            // Get current viewer count
            viewerRef.on('value', (snapshot) => {
                const count = snapshot.val() || 0;
                viewerCount.textContent = count.toLocaleString();
            });
            
            // Increment viewer count when page loads
            viewerRef.transaction((current) => {
                return (current || 0) + 1;
            });
            
            // Decrement when user leaves
            window.addEventListener('beforeunload', () => {
                viewerRef.transaction((current) => {
                    return (current || 0) - 1;
                });
            });
        }

        // Load match data from API
        async function loadMatchData() {
            try {
                // In a real implementation, you would call your backend API
                // which would then call the sports API with proper authentication
                // For demo purposes, we're using mock data
                
                const mockMatchData = {
                    homeTeam: {
                        name: "Manchester City",
                        logo: "assets/CITY.png",
                        score: 0
                    },
                    awayTeam: {
                        name: "Barcelona",
                        logo: "assets/FCB.png",
                        score: 1
                    },
                    competition: "UEFA Champions League",
                    minute: 35,
                    status: "LIVE",
                    broadcasters: [
                        { id: "dazn", name: "DAZN", logo: "dazn-logo.png", available: true },
                        { id: "espn", name: "ESPN", logo: "espn-logo.png", available: true },
                        { id: "bein", name: "beIN Sports", logo: "bein-logo.png", available: false }
                    ],
                    commentary: [
                        { minute: 35, text: "Great save by the Barcelona goalkeeper!" },
                        { minute: 32, text: "Manchester City scores! What a goal!" },
                        { minute: 28, text: "Corner kick for Barcelona" },
                        { minute: 25, text: "Yellow card shown to Manchester City defender" }
                    ],
                    stats: {
                        possession: { home: 58, away: 42 },
                        shots: { home: 12, away: 5 },
                        shotsOnTarget: { home: 4, away: 2 },
                        corners: { home: 5, away: 3 },
                        fouls: { home: 8, away: 10 }
                    }
                };

                // Update match info
                homeTeamName.textContent = mockMatchData.homeTeam.name;
                awayTeamName.textContent = mockMatchData.awayTeam.name;
                homeTeamLogo.src = mockMatchData.homeTeam.logo;
                awayTeamLogo.src = mockMatchData.awayTeam.logo;
                matchCompetition.textContent = mockMatchData.competition;
                matchScore.textContent = `${mockMatchData.homeTeam.score} - ${mockMatchData.awayTeam.score}`;
                matchMinute.textContent = `${mockMatchData.minute}'`;
                matchTime.textContent = `${mockMatchData.status} ${mockMatchData.minute}'`;

                // Update commentary
                liveCommentary.innerHTML = '';
                mockMatchData.commentary.forEach(event => {
                    const comment = document.createElement('p');
                    comment.innerHTML = `<strong>${event.minute}'</strong> ${event.text}`;
                    liveCommentary.appendChild(comment);
                });

                // Update statistics
                matchStatistics.innerHTML = `
                    <div class="stat-item">
                        <div class="stat-bar-container">
                            <div class="stat-bar-label">Possession</div>
                            <div class="stat-bar">
                                <div class="stat-bar-home" style="width:${mockMatchData.stats.possession.home}%">
                                    ${mockMatchData.stats.possession.home}%
                                </div>
                                <div class="stat-bar-away" style="width:${mockMatchData.stats.possession.away}%">
                                    ${mockMatchData.stats.possession.away}%
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div>Shots: ${mockMatchData.stats.shots.home} - ${mockMatchData.stats.shots.away}</div>
                    </div>
                    <div class="stat-item">
                        <div>Shots on Target: ${mockMatchData.stats.shotsOnTarget.home} - ${mockMatchData.stats.shotsOnTarget.away}</div>
                    </div>
                    <div class="stat-item">
                        <div>Corners: ${mockMatchData.stats.corners.home} - ${mockMatchData.stats.corners.away}</div>
                    </div>
                    <div class="stat-item">
                        <div>Fouls: ${mockMatchData.stats.fouls.home} - ${mockMatchData.stats.fouls.away}</div>
                    </div>
                `;

                // Update broadcaster options
                broadcasterOptions.innerHTML = '';
                mockMatchData.broadcasters.forEach(broadcaster => {
                    const btn = document.createElement('button');
                    btn.className = `broadcaster-btn ${broadcaster.available ? '' : 'disabled'}`;
                    btn.textContent = broadcaster.name;
                    btn.dataset.id = broadcaster.id;
                    btn.disabled = !broadcaster.available;
                    
                    if (broadcaster.available) {
                        btn.addEventListener('click', () => {
                            document.querySelectorAll('.broadcaster-btn').forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            selectBroadcaster(broadcaster.id);
                        });
                    }
                    
                    broadcasterOptions.appendChild(btn);
                });

            } catch (error) {
                console.error('Error loading match data:', error);
            }
        }

        // Load matches data
        async function loadMatches() {
            try {
                // Mock data for matches
                const mockMatches = [
                    {
                        id: 1,
                        competition: "Premier League",
                        time: "19:45",
                        status: "LIVE",
                        homeTeam: { name: "Arsenal", logo: "assets/arsenal.png", score: 2 },
                        awayTeam: { name: "Chelsea", logo: "assets/chelsea.png", score: 1 }
                    },
                    {
                        id: 2,
                        competition: "Serie A",
                        time: "20:00",
                        status: "LIVE",
                        homeTeam: { name: "Juventus", logo: "assets/juventus.png", score: 0 },
                        awayTeam: { name: "AC Milan", logo: "assets/milan.png", score: 0 }
                    },
                    {
                        id: 3,
                        competition: "La Liga",
                        time: "21:00",
                        status: "UPCOMING",
                        homeTeam: { name: "Real Madrid", logo: "assets/madrid.png", score: null },
                        awayTeam: { name: "Atletico Madrid", logo: "assets/atletico.png", score: null }
                    },
                    {
                        id: 4,
                        competition: "Bundesliga",
                        time: "17:30",
                        status: "HALFTIME",
                        homeTeam: { name: "Bayern Munich", logo: "assets/bayern.png", score: 1 },
                        awayTeam: { name: "Dortmund", logo: "assets/dortmund.png", score: 1 }
                    }
                ];

                // Clear container
                matchesContainer.innerHTML = '';

                // Add match cards
                mockMatches.forEach(match => {
                    const matchCard = document.createElement('div');
                    matchCard.className = 'match-card';
                    
                    let statusClass = '';
                    let statusText = match.status;
                    
                    if (match.status === "LIVE") {
                        statusClass = 'live';
                        statusText = 'LIVE';
                    } else if (match.status === "UPCOMING") {
                        statusClass = 'upcoming';
                    } else if (match.status === "HALFTIME") {
                        statusClass = 'halftime';
                    }
                    
                    const scoreDisplay = match.homeTeam.score !== null ? 
                        `${match.homeTeam.score} - ${match.awayTeam.score}` : 'vs';
                    
                    matchCard.innerHTML = `
                        <div class="match-card-header">${match.competition}</div>
                        <div class="match-card-content">
                            <div class="match-teams">
                                <div class="match-team">
                                    <img src="${match.homeTeam.logo}" alt="${match.homeTeam.name}" class="match-team-logo">
                                    <span>${match.homeTeam.name}</span>
                                </div>
                                <div class="match-vs">${scoreDisplay}</div>
                                <div class="match-team">
                                    <img src="${match.awayTeam.logo}" alt="${match.awayTeam.name}" class="match-team-logo">
                                    <span>${match.awayTeam.name}</span>
                                </div>
                            </div>
                            <div class="match-time">
                                <span class="match-status ${statusClass}">${statusText}</span>
                                ${match.time}
                            </div>
                        </div>
                    `;
                    
                    matchesContainer.appendChild(matchCard);
                });

            } catch (error) {
                console.error('Error loading matches:', error);
            }
        }

        // Load highlights data
        async function loadHighlights() {
            try {
                // Mock data for highlights
                const mockHighlights = [
                    {
                        id: 1,
                        title: "Manchester City vs Barcelona - All Goals",
                        duration: "3:45",
                        views: "1.2M",
                        date: "2 days ago",
                        thumbnail: "assets/highlight1.jpg"
                    },
                    {
                        id: 2,
                        title: "Best Saves of the Week",
                        duration: "4:12",
                        views: "856K",
                        date: "1 day ago",
                        thumbnail: "assets/highlight2.jpg"
                    },
                    {
                        id: 3,
                        title: "Premier League Matchday Highlights",
                        duration: "8:30",
                        views: "2.1M",
                        date: "3 days ago",
                        thumbnail: "assets/highlight3.jpg"
                    },
                    {
                        id: 4,
                        title: "Top 5 Goals from Serie A",
                        duration: "5:15",
                        views: "1.5M",
                        date: "5 days ago",
                        thumbnail: "assets/highlight4.jpg"
                    }
                ];

                // Clear container
                highlightsContainer.innerHTML = '';

                // Add highlight cards
                mockHighlights.forEach(highlight => {
                    const highlightCard = document.createElement('div');
                    highlightCard.className = 'highlight-card';
                    
                    highlightCard.innerHTML = `
                        <div class="highlight-thumbnail">
                            <img src="${highlight.thumbnail}" alt="${highlight.title}" style="width:100%; height:100%; object-fit:cover;">
                            <div class="highlight-play">
                                <i class="fas fa-play"></i>
                            </div>
                        </div>
                        <div class="highlight-info">
                            <div class="highlight-title">${highlight.title}</div>
                            <div class="highlight-meta">
                                <span>${highlight.views} views</span> • 
                                <span>${highlight.duration}</span> • 
                                <span>${highlight.date}</span>
                            </div>
                        </div>
                    `;
                    
                    highlightsContainer.appendChild(highlightCard);
                });

            } catch (error) {
                console.error('Error loading highlights:', error);
            }
        }

        // Load leagues data
        async function loadLeagues() {
            try {
                // Mock data for leagues
                const mockLeagues = [
                    {
                        id: 1,
                        name: "Premier League",
                        logo: "assets/premier-league.png",
                        country: "England"
                    },
                    {
                        id: 2,
                        name: "La Liga",
                        logo: "assets/la-liga.png",
                        country: "Spain"
                    },
                    {
                        id: 3,
                        name: "Serie A",
                        logo: "assets/serie-a.png",
                        country: "Italy"
                    },
                    {
                        id: 4,
                        name: "Bundesliga",
                        logo: "assets/bundesliga.png",
                        country: "Germany"
                    },
                    {
                        id: 5,
                        name: "Ligue 1",
                        logo: "assets/ligue-1.png",
                        country: "France"
                    },
                    {
                        id: 6,
                        name: "UEFA Champions League",
                        logo: "assets/ucl.png",
                        country: "Europe"
                    }
                ];

                // Clear container
                leaguesContainer.innerHTML = '';

                // Add league cards
                mockLeagues.forEach(league => {
                    const leagueCard = document.createElement('div');
                    leagueCard.className = 'league-card';
                    
                    leagueCard.innerHTML = `
                        <img src="${league.logo}" alt="${league.name}" class="league-logo">
                        <div class="league-name">${league.name}</div>
                        <small>${league.country}</small>
                    `;
                    
                    leaguesContainer.appendChild(leagueCard);
                });

            } catch (error) {
                console.error('Error loading leagues:', error);
            }
        }

        // Initialize streaming
        function initStreaming() {
            // Initialize video.js player
            player = videojs('liveStreamPlayer', {
                controls: true,
                autoplay: false,
                preload: 'auto',
                responsive: true,
                fluid: true
            });

            // For demo purposes, auto-select the first available broadcaster after 2 seconds
            setTimeout(() => {
                const firstAvailable = document.querySelector('.broadcaster-btn:not(.disabled)');
                if (firstAvailable) {
                    firstAvailable.click();
                }
            }, 2000);
        }

        // Select broadcaster and load stream
        function selectBroadcaster(broadcasterId) {
            // In a real implementation, you would call your backend API
            // to get the stream URL for the selected broadcaster
            // For demo purposes, we're using mock streams
            
            let streamUrl;
            switch(broadcasterId) {
                case 'dazn':
                    streamUrl = 'https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8';
                    break;
                case 'espn':
                    streamUrl = 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8';
                    break;
                default:
                    streamUrl = 'https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8';
            }
            
            currentStream = {
                id: broadcasterId,
                url: streamUrl
            };
            
            loadStream(currentStream);
        }

        // Load the stream
        function loadStream(streamConfig) {
            streamPlaceholder.style.display = 'none';
            liveStreamPlayer.style.display = 'block';
            
            // Reset player
            player.pause();
            player.src('');
            
            if (Hls.isSupported()) {
                // Destroy previous HLS instance if exists
                if (hlsInstance) {
                    hlsInstance.destroy();
                }
                
                // Create new HLS instance
                hlsInstance = new Hls();
                hlsInstance.loadSource(streamConfig.url);
                hlsInstance.attachMedia(liveStreamPlayer);
                hlsInstance.on(Hls.Events.MANIFEST_PARSED, function() {
                    player.play();
                    qualityBtn.style.display = 'inline-flex';
                });
            } else if (liveStreamPlayer.canPlayType('application/vnd.apple.mpegurl')) {
                // Native HLS support (Safari)
                liveStreamPlayer.src = streamConfig.url;
                liveStreamPlayer.play();
                qualityBtn.style.display = 'none';
            } else {
                // Fallback
                streamPlaceholder.style.display = 'flex';
                liveStreamPlayer.style.display = 'none';
                streamPlaceholder.innerHTML = `
                    <div>
                        <p>Stream not supported in your browser</p>
                        <p>Try using Chrome, Firefox, or Edge</p>
                    </div>
                `;
            }
        }

        // Quality selector
        qualityBtn.addEventListener('click', () => {
            if (hlsInstance) {
                const levels = hlsInstance.levels;
                const currentLevel = hlsInstance.currentLevel;
                
                // Simple quality switcher for demo
                const newLevel = (currentLevel + 1) % levels.length;
                hlsInstance.currentLevel = newLevel;
                
                qualityBtn.innerHTML = `<i class="fas fa-tachometer-alt"></i> Quality: ${levels[newLevel].height}p`;
            }
        });

        // Simulate live match updates
        setInterval(() => {
            const minute = parseInt(matchMinute.textContent) || 0;
            if (minute < 90) {
                matchMinute.textContent = `${minute + 1}'`;
                matchTime.textContent = `LIVE ${minute + 1}'`;
                
                // Random match events
                if (Math.random() > 0.9) {
                    const events = [
                        "Corner kick",
                        "Free kick",
                        "Yellow card",
                        "Substitution",
                        "Shot on target"
                    ];
                    const randomEvent = events[Math.floor(Math.random() * events.length)];
                    
                    const comment = document.createElement('p');
                    comment.innerHTML = `<strong>${minute + 1}'</strong> ${randomEvent}`;
                    liveCommentary.insertBefore(comment, liveCommentary.firstChild);
                    
                    // Keep only the last 20 comments
                    if (liveCommentary.children.length > 20) {
                        liveCommentary.removeChild(liveCommentary.lastChild);
                    }
                }
                
                // Random goal
                if (minute > 30 && minute < 80 && Math.random() > 0.98) {
                    const isHomeGoal = Math.random() > 0.5;
                    if (isHomeGoal) {
                        const homeScore = parseInt(matchScore.textContent.split('-')[0]) + 1;
                        matchScore.textContent = `${homeScore} - ${matchScore.textContent.split('-')[1]}`;
                        
                        const comment = document.createElement('p');
                        comment.innerHTML = `<strong>${minute + 1}' GOAL!</strong> ${homeTeamName.textContent} scores!`;
                        liveCommentary.insertBefore(comment, liveCommentary.firstChild);
                    } else {
                        const awayScore = parseInt(matchScore.textContent.split('-')[1]) + 1;
                        matchScore.textContent = `${matchScore.textContent.split('-')[0]} - ${awayScore}`;
                        
                        const comment = document.createElement('p');
                        comment.innerHTML = `<strong>${minute + 1}' GOAL!</strong> ${awayTeamName.textContent} scores!`;
                        liveCommentary.insertBefore(comment, liveCommentary.firstChild);
                    }
                }
            } else if (minute === 90) {
                matchTime.textContent = "FULL TIME";
            }
        }, 30000); // Update every 30 seconds for demo purposes
        
        function openChat() {
            window.open('ballBot.html', 'chatWindow', 'width=500,height=600');
        }
    </script>
</body>
</html>
